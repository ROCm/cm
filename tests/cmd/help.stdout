cm 0.1.0
Frontend for configuring/building/testing CMake projects (see --help for more details)

Provides a common interface with saner defaults for working with CMake projects, including
special support for smoothing over quirks when compiling LLVM.

The default cmake command-line presents multiple inconsistent interfaces for related tasks,
namely:

* The configure step generally requires -S for specifying the "source" path and -B for
  specifying the "build" path (also referred to as the "binary" path in some places).
* The build step either requires directly invoking the build tool, with its own unique syntax
  for specifying the build path again, or:
* The built-in, generic interface to the build tool in cmake requires a _different_ syntax for
  specifying the build path, no longer accepting -B at all.

Other tasks, like specifying the type of build (Release, Debug, RelWithDbgInfo, ...), are also
needlessly fragmented between configuration (-DCMAKE_BUILD_TYPE=...) and build (--config ...).

These tasks are also not on equal footing, with configure being the "default"
and build being a pseudo-subcommand "--build".

This tool exposes the "configuration" and "build" tasks as subcommands directly, and give them
a common interface for specifying the source (-s, --source) and binary (-b, --binary) paths, as
well as the config (-c, --config).

Beyond the tools themselves, individual projects also use cmake in quirky ways. In particular,
LLVM makes some strange choices:

* The root "CMakeLists.txt" is in the "llvm/" directory, not at the root of the project.
* Does not respect CMAKE_{C,CXX}_COMPILER_LAUNCHER, instead invents LLVM_CCACHE_BUILD.

It also has many knobs whose defaults are not appropriate for development, such as disabling
assertions by default, and it has many targets and optional projects which can be
enabled/disabled with particular cache variables.

To make LLVM behave like "the ideal project" as much as possible, this tool expects the source
to still be specified as the root llvm-project repository. By default, the tool will detect
that LLVM is being compiled and update the true source directory accordingly, as well as adjust
many default options. There are also flags for LLVM-specific concepts like TARGETS_TO_BUILD and
EXPENSIVE_CHECKS to simplify common configuration tweaks.

Finally, another subcommand "lit" provides a nicer interface to llvm-lit (and cmake --build, to
implement the --group flag). The "lit" subcommand ensures that a resultdb file called
"lit.json" be written to the binary path when tests are run, allowing subsequent runs to recall
which tests failed. Repeatedly invoking the lit subcommand can thus incrementally "resolve"
tests as they are updated, removing them from the list until it is empty. This behavior is
suppressed when explicit tests are passed to the lit subcommand, so the developer can focus on
specific failing tests without losing track of the remaining failing tests.

The "lit" subcommand will also manage the FILECHECK_OPTS environment variable to make truely
"verbose" lit output easier to achieve.

Typical usage of the tool involves leaving a shell parked at the top-level of the llvm-project
and running subcommands (note that the subcommand can be abbreviated):

    $ cm configure      # default values for --source, --binary, and --config are used
    $ cm build          # ditto
    $ cm b check-llvm
    $ cm l
    $ cm l -v
    $ # ...
    $ cm l

With non-default values for --source/--binary/--config you can leave these options alone across
subcommands:

    $ cm -s src -b bin -c Debug c
    $ cm -s src -b bin -c Debug b
    $ cm -s src -b bin -c Debug b check-llvm
    $ cm -s src -b bin -c Debug l
    $ cm -s src -b bin -c Debug l -v
    $ # ...
    $ cm -s src -b bin -c Debug l

With most shells, these values can be factored out with aliases:

    $ alias cm='cm -s src -b bin -c Debug'
    $ cm configure
    $ cm build
    $ cm b check-llvm
    $ cm l
    $ cm l -v
    $ # ...
    $ cm l

USAGE:
    cm [OPTIONS] <SUBCOMMAND>

OPTIONS:
    -#, --dry-run
            Perform a dry run, only printing the generated command line

    -c, --config <CONFIG>
            Build Config
            
            [default: Release]

    -d, --debug
            Shorthand for `--config Debug`

    -h, --help
            Print help information

    -q, --quirks <QUIRKS>
            Disable quirk mode detection and specify one explicitly
            
            [possible values: none, llvm]

    -V, --version
            Print version information

CMAKE DIRECTORY OPTIONS:
    -b, --binary <BINARY>
            CMake Binary Directory

    -s, --source <SOURCE>
            CMake Source Directory

SUBCOMMANDS:
    build
            CMake Build
    configure
            CMake Configure
    help
            Print this message or the help of the given subcommand(s)
    lit
            llvm-lit
